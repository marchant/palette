<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="list-association-inspector.css">
    <script type="text/montage-serialization">
    {
        "owner": {
            "properties": {
                "element": {
                    "#": "list-association-inspector"
                }
            }
        },

        "propertyCollection": {
            "prototype": "montage/ui/repetition.reel",
            "properties": {
                "element": {
                    "#": "propertyCollection"
                }
            },
            "bindings": {
                "content": {
                    "<-": "@owner.collectionValue"
                }
            }
        },

        "objectAssociationInspector": {
            "prototype": "../object-association-inspector.reel",
            "properties": {
                "element": {
                    "#": "objectAssociationInspector"
                },
                "label": "",
                "readOnlyLabel": true
            },
            "bindings": {
                "editingDocument": {
                    "<-": "@owner.editingDocument"
                },
                "objectValue": {
                    "<-": "@propertyCollection:iteration.object"
                },
                "propertyBlueprint": {
                    "<-": "@owner.propertyBlueprint"
                }
            }
        },

        "addButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {
                    "#": "addButton"
                },
                "label": "+"
            },
            "bindings": {
                "disabled": {
                    "<-": "@owner.propertyBlueprint.readOnly || @propertyCollection.length.ge(@owner.propertyBlueprint.cardinality)"
                }
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {
                        "@": "owner"
                    }
                }
            ]
        },

        "removeButton": {
            "prototype": "matte/ui/button.reel",
            "properties": {
                "element": {
                    "#": "removeButton"
                },
                "label": "-"
            },
            "bindings": {
                "disabled": {
                    "<-": "@owner.propertyBlueprint.readOnly"
                },
                "detail.index": {
                    "<-": "@propertyCollection:iteration.index"
                }
            },
            "listeners": [
                {
                    "type": "action",
                    "listener": {
                        "@": "owner"
                    }
                }
            ]
        }

    }
    </script>
</head>
<body>
    <div data-montage-id="list-association-inspector" class="ListAssociationInspector">
        <div class="Association">
            <button data-montage-id="addButton"></button>
        </div>
        <ul data-montage-id="propertyCollection" class="PropertyCollection">
            <li class="PropertyCollection-item">
                <div data-montage-id="objectAssociationInspector"></div>
                <button data-montage-id="removeButton" class="PropertyCollection-item-removeButton"></button>
            </li>
        </ul>
    </div>
</body>
</html>
